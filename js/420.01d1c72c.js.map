{"version":3,"file":"js/420.01d1c72c.js","mappings":"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","sources":["webpack://project-management2/./src/views/EngineeringsOverview.vue","webpack://project-management2/./src/views/EngineeringsOverview.vue?8c72"],"sourcesContent":["<template>\n  <div class=\"container py-5\">    \n    <h1 style=\"font-weight:bold; text-align: center;\">{{project.title}}</h1>\n    <h5 style=\"font-weight:bold; text-align: center;\">發包廠商</h5>    \n    \n    <button @click=\"$router.back()\" type=\"button\" class=\"btn btn-link\">返回上一頁</button>     \n \n     <!--新增欄-->\n    <table class=\"table table-hover mt-5\" style=\" overflow : hidden; border-radius : 5px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\">\n      <tbody>\n        <tr>\n          <td>\n            <div class=\"input-field\">\n              <label for=\"type\">工種</label>                        \n              <select name=\"type\" id=\"type\" v-model=\"input.type\">\n                <option\n                  value=''\n                  selected\n                  disabled\n                >\n                  --請選擇--\n                </option>\n                <option \n                  v-for=\"engineeringType in engineeringTypes\"\n                  :key=\"engineeringType.id\" \n                  :value=\"engineeringType.type\" \n                  >\n                  {{engineeringType.type}}\n                </option>\n              </select>\n            </div>\n          </td>\n          <td>\n            <div class=\"input-field\">\n              <label for=\"quote\">報價</label>\n              <input v-model=\"input.quote\" placeholder=\"輸入\" id=\"quote\" type=\"text\"> \n            </div>\n          </td>\n          <td>\n            <div class=\"input-field\">\n              <label for=\"title\">成本</label>\n              <input v-model=\"input.cost\" placeholder=\"輸入\"  id=\"cost\" type=\"text\"> \n            </div>\n          </td>\n          <td>\n            <a class=\"btn btn-primary\" href=\"#!\" @click=\"addEngineering\">新增</a>            \n          </td>          \n        </tr>\n      </tbody>\n    </table>\n\n    <div class=\"form-group mt-5\">\n       <input v-model=\"searchInput\" @keyup.enter=\"serchEngineer\" type=\"text\" name=\"search\"  placeholder=\"工種查詢\" class=\"form-control\">\n    </div> \n    \n    <!--主欄-->    \n    <table class=\"table table-hover\" style=\" overflow : hidden; border-radius : 5px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\">\n      <thead >\n        <tr style=\"color : white; font-weight : bold; background: #060411 \"> \n          <td>序號</td>\n          <td>工種</td>            \n          <td>總報價</td>\n          <td>總成本</td>          \n          <td>淨利</td>\n          <td>毛利率</td>              \n          <td>動作</td>\n        </tr>                 \n      </thead>\n      <tbody>\n        <tr v-for=\"(engineering, index ) in engineeringsShowMode\" :key=\"engineering.id\">     \n          <td>{{index}}</td>       \n          <td>{{engineering.type}}</td>\n          <td>{{engineering.quoteTotal}}</td>\n          <td>{{engineering.costTotal}}</td>\n          <td>{{engineering.profitTotal}}</td>\n          <td>{{engineering.profitMarginTotal}}</td>\n          <td>      \n            <router-link :to=\"{name: 'engineering-todo', params:{id: engineering.id}}\" class=\"btn btn-outline-primary\">明細</router-link>\n            <a href=\"#!\" class=\"btn btn-outline-danger\" @click.stop.prevent=\"removeEngineering(engineering.id)\">移除</a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    \n    <!--加總-->  \n    <h5 style=\"font-weight:bold; text-align: center;\" class=\"mt-5\">總計</h5>  \n    <table class=\"table table-hover\" style=\" overflow : hidden; border-radius : 5px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\">\n      <thead >\n        <tr style=\"color : white; font-weight : bold; background: #060411 \"> \n          <td>總報價</td>\n          <td>總成本</td>          \n          <td>淨利</td>\n          <td>毛利率</td>  \n        </tr>                 \n      </thead>\n      <tbody>\n        <tr>\n          <td>{{sumProjectQuote}}</td>\n          <td>{{sumProjectCost}}</td>\n          <td>{{sumGrossProfit}}</td>\n          <td>{{sumGrossProfitMargin}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>  \n  import {v4 as uuidv4} from 'uuid'\n  import {mapState, mapMutations} from 'vuex'\n\n  export default {\n  name: 'EngineeringsOverview',     \n  data() {\n    return {        \n      project: [],\n      input: {\n        type:'',\n        quote:0,\n        cost: 0,\n      },       \n      searchInput:'',\n      filterEngineers:[],\n    };\n  },\n  created(){    \n    const {id} = this.$route.params\n    this.project = this.projects[id]\n    this.test()\n    this.calcProfitTotal()\n    this.calcProfitMarginTotal()   \n    \n    // this.engineerings = this.projects[id].engineerings\n  },   \n  // mounted:{\n    \n  // },\n  // updated:{\n  //   console.log(123)\n  //   // this.sumProjectQuote()\n  // },\n  watch:{\n    project:{\n      handler(){\n        //總計區的運算\n        this.project.projectQuote = 0\n        let sumquoteTotal = 0\n        this.project.engineerings.forEach( engineering => \n          sumquoteTotal += engineering.quoteTotal\n        )  \n        this.project.projectQuote = sumquoteTotal\n\n        let sumcostTotal = 0\n        this.project.engineerings.forEach( engineering => \n          sumcostTotal += engineering.costTotal\n        )\n        this.project.projectCost = sumcostTotal \n        \n        //新增工總 淨利 毛利率觸發\n        this.project.engineerings = this.calcProfitTotal()\n        this.project.engineerings = this.calcProfitMarginTotal()\n    },   \n    deep: true\n    }\n  },\n  computed: {    \n    ...mapState(['projects','engineeringTypes']), \n\n    //總計區的運算\n    sumProjectQuote:{ \n      get(){\n        let sum = 0\n        this.project.engineerings.forEach( engineering => \n          sum += engineering.quoteTotal\n        )   \n        // this.project.projectQuote = sum   \n        return sum\n      },\n      // set(newVal){\n      //   this.project.projectQuote = newVal\n      // } \n    },\n    sumProjectCost(){  \n      let sum = 0\n      this.project.engineerings.forEach( engineering => \n        sum += engineering.costTotal\n      )\n      return sum\n    },    \n    sumGrossProfit(){  \n      return this.sumProjectQuote-this.sumProjectCost\n    },\n    sumGrossProfitMargin(){         \n        return (this.sumGrossProfit/this.sumProjectCost).toFixed(2)\n    },\n\n    engineeringsShowMode(){\n      return this.filterEngineers.length === 0 ? this.project.engineerings : this.filterEngineers\n    },\n\n  }, \n  methods:{ \n    ...mapMutations(['removeProjectEngineering']),\n\n    test(){\n    \n    },\n    //單獨工總計算區\n    calcProfitTotal(){\n      this.project.engineerings.forEach( \n        engineering => engineering.profitTotal = engineering.quoteTotal-engineering.costTotal\n      )\n      return this.project.engineerings\n    },\n    calcProfitMarginTotal(){\n      this.project.engineerings.forEach( \n        engineering => engineering.profitMarginTotal =  (engineering.profitTotal/engineering.quoteTotal).toFixed(2)\n      )\n      return this.project.engineerings\n    },\n\n    serchEngineer(e){\n      e.preventDefault()\n      const keywords = this.searchInput.trim()\n      if (!keywords) {   \n        this.filterEngineers = this.project.engineerings      \n        return alert('您沒有輸入訊息')\n      } \n\n      this.filterEngineers = this.project.engineerings.filter(\n        engineering => engineering.type.includes(keywords)\n      )\n\n      if(this.filterEngineers.length === 0) {\n        alert(`您輸入關鍵字：${keywords}沒有結果`)\n      }\n      this.searchInput = ''\n    },\n    addEngineering(e){\n      e.preventDefault()\n      const inputType = this.input.type \n      if(!inputType){\n        alert(\"未選擇工種\")\n        return\n      }\n      let checkReapeat = this.project.engineerings.some(\n        engineering => engineering.type === inputType\n      )\n      if(checkReapeat){\n        alert(\"此工種已在下列清單\")\n        return\n      }        \n      if(this.input.quote === 0){\n        alert(\"未輸入報價金額\")\n        return\n      }        \n      this.project.engineerings.push({\n        id: uuidv4(),\n        type:this.input.type,\n        quoteTotal: Number(this.input.quote),\n        costTotal: Number(this.input.cost)\n      })\n      //清空\n      this.input.type ='',\n      this.input.quote = 0,\n      this.input.cost = 0\n    },\n    removeEngineering(engineeringID){\n      this.project.engineerings = this.project.engineerings.filter(\n        engineering => engineering.id !== engineeringID\n      )      \n    }\n  }   \n  };\n</script>\n","import { render } from \"./EngineeringsOverview.vue?vue&type=template&id=c70f14f8\"\nimport script from \"./EngineeringsOverview.vue?vue&type=script&lang=js\"\nexport * from \"./EngineeringsOverview.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\WING JING\\\\Desktop\\\\ac\\\\small\\\\project-management2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","for","value","selected","disabled","_createElementBlock","_toDisplayString","$data","title","_hoisted_3","onClick","_ctx","back","type","_hoisted_6","name","id","$event","_hoisted_7","_Fragment","_renderList","engineeringType","key","_hoisted_8","_hoisted_10","quote","placeholder","_hoisted_12","cost","href","$options","onKeyup","_hoisted_15","engineering","index","quoteTotal","costTotal","profitTotal","profitMarginTotal","_createVNode","_component_router_link","to","params","_hoisted_17","_hoisted_18","_hoisted_20","data","project","input","searchInput","filterEngineers","created","this","$route","projects","test","calcProfitTotal","calcProfitMarginTotal","watch","handler","projectQuote","sumquoteTotal","engineerings","forEach","sumcostTotal","projectCost","deep","computed","mapState","sumProjectQuote","get","sum","sumProjectCost","sumGrossProfit","sumGrossProfitMargin","toFixed","engineeringsShowMode","length","methods","mapMutations","serchEngineer","e","preventDefault","keywords","trim","alert","filter","includes","addEngineering","inputType","checkReapeat","some","push","uuidv4","Number","removeEngineering","engineeringID","__exports__","render"],"sourceRoot":""}